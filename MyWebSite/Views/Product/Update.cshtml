@model MyWebSite.Models.Product
@using Microsoft.AspNetCore.Mvc.Rendering
@{
    ViewData["Title"] = "Edit Product";
}

<div class="container py-5">
    <div class="row mb-5">
        <div class="col-md-8 mx-auto text-center">
            <h2 class="fw-light mb-4" style="font-size: 32px; letter-spacing: -0.5px;">Edit Product</h2>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb justify-content-center">
                    <li class="breadcrumb-item"><a asp-controller="Home" asp-action="Index" class="text-decoration-none" style="color: #0066CC;">Home</a></li>
                    <li class="breadcrumb-item"><a asp-action="Index" class="text-decoration-none" style="color: #0066CC;">Products</a></li>
                    <li class="breadcrumb-item active">Edit @Model.Name</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-7">
            <form asp-action="Update" method="post" enctype="multipart/form-data">
                <div class="bg-white rounded-4 shadow-sm p-5 mb-5">
                    <input type="hidden" asp-for="ProductId" />

                    <div class="mb-4">
                        <label asp-for="Name" class="form-label" style="font-size: 14px; color: #86868b;">Product Name</label>
                        <input asp-for="Name" class="form-control form-control-lg border-0 bg-light" style="height: 56px; border-radius: 12px;" />
                        <span asp-validation-for="Name" class="text-danger" style="font-size: 14px;"></span>
                    </div>

                    <div class="mb-4">
                        <label asp-for="Price" class="form-label" style="font-size: 14px; color: #86868b;">Price</label>
                        <div class="input-group">
                            <span class="input-group-text border-0 bg-light" style="border-top-left-radius: 12px; border-bottom-left-radius: 12px;">$</span>
                            <input asp-for="Price" class="form-control form-control-lg border-0 bg-light" style="height: 56px; border-top-right-radius: 12px; border-bottom-right-radius: 12px;" />
                        </div>
                        <span asp-validation-for="Price" class="text-danger" style="font-size: 14px;"></span>
                    </div>

                    <div class="mb-4">
                        <label asp-for="Description" class="form-label" style="font-size: 14px; color: #86868b;">Description</label>
                        <textarea asp-for="Description" class="form-control border-0 bg-light" style="border-radius: 12px; min-height: 150px;"></textarea>
                        <span asp-validation-for="Description" class="text-danger" style="font-size: 14px;"></span>
                    </div>

                    <div class="mb-4">
                        <label asp-for="CategoryId" class="form-label" style="font-size: 14px; color: #86868b;">Category</label>
                        <select asp-for="CategoryId" asp-items="@ViewBag.Categories" class="form-select form-select-lg border-0 bg-light" style="height: 56px; border-radius: 12px;"></select>
                        <span asp-validation-for="CategoryId" class="text-danger" style="font-size: 14px;"></span>
                    </div>

                    <div class="mb-5">
                        <label asp-for="ImageUrl" class="form-label" style="font-size: 14px; color: #86868b;">Product Image</label>

                        @if (!string.IsNullOrEmpty(Model.ImageUrl))
                        {
                            <div class="bg-light rounded-4 p-4 mb-3 text-center">
                                <img src="@Model.ImageUrl" alt="@Model.Name" class="img-fluid rounded-3" style="max-height: 200px; object-fit: contain;" />
                                <p class="text-secondary mt-3 mb-0" style="font-size: 14px;">Current image</p>
                            </div>
                        }

                        <div class="mt-3">
                            <div class="position-relative">
                                <button type="button" class="btn w-100 text-center py-3" style="background-color: #F5F5F7; color: #0066CC; border-radius: 12px; border: none;">
                                    Choose File
                                </button>
                                <input type="file" asp-for="ImageUrl" accept="image/*" class="position-absolute top-0 start-0 opacity-0 w-100 h-100" style="cursor: pointer;" />
                            </div>
                            <p class="text-secondary mt-2 mb-0" style="font-size: 14px;">Upload a new image to replace the current one</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-4 shadow-sm p-5 mb-5">
                    <h3 class="fw-light mb-4" style="font-size: 20px; letter-spacing: -0.5px;">Tips</h3>

                    <div class="d-flex align-items-center mb-4">
                        <div class="rounded-circle flex-shrink-0 me-3" style="background-color: #F5F5F7; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center;">
                            <i class="bi bi-info-circle" style="color: #0066CC;"></i>
                        </div>
                        <div>
                            <p class="mb-0" style="color: #1d1d1f;">All fields are required</p>
                            <p class="mb-0 text-secondary" style="font-size: 14px;">Complete all information for best results</p>
                        </div>
                    </div>

                    <div class="d-flex align-items-center mb-4">
                        <div class="rounded-circle flex-shrink-0 me-3" style="background-color: #F5F5F7; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center;">
                            <i class="bi bi-image" style="color: #0066CC;"></i>
                        </div>
                        <div>
                            <p class="mb-0" style="color: #1d1d1f;">Recommended image size: 800×600 pixels</p>
                            <p class="mb-0 text-secondary" style="font-size: 14px;">For optimal display quality</p>
                        </div>
                    </div>

                    <div class="d-flex align-items-center">
                        <div class="rounded-circle flex-shrink-0 me-3" style="background-color: #F5F5F7; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center;">
                            <i class="bi bi-text-paragraph" style="color: #0066CC;"></i>
                        </div>
                        <div>
                            <p class="mb-0" style="color: #1d1d1f;">Add detailed descriptions</p>
                            <p class="mb-0 text-secondary" style="font-size: 14px;">Improves searchability and customer experience</p>
                        </div>
                    </div>
                </div>

                <div class="d-grid gap-3">
                    <button type="submit" class="btn btn-lg py-3 text-white fw-normal" style="background-color: #0066CC; border-radius: 12px; border: none;">
                        Update Product
                    </button>
                    <div class="d-flex gap-3">
                        <a asp-action="Display" asp-route-id="@Model.ProductId" class="btn btn-lg py-3 fw-normal flex-grow-1 text-decoration-none" style="background-color: #F5F5F7; color: #1d1d1f; border-radius: 12px; border: none;">
                            View Product
                        </a>
                        <a asp-action="Index" class="btn btn-lg py-3 fw-normal flex-grow-1 text-decoration-none" style="background-color: #F5F5F7; color: #1d1d1f; border-radius: 12px; border: none;">
                            Back to Products
                        </a>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}